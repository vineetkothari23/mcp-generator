"""
{{ project_name }} - Enhanced MCP Server with OpenAPI Client

Generated using openapi-generator for robust API client integration.
"""

import asyncio
import logging
from typing import Dict, Any, List
from mcp.server import Server
from mcp.types import Tool, TextContent

from .config import {{ service_name|pascal_case }}Config
from .generated_client.api_client import ApiClient
from .generated_client.configuration import Configuration
from .tools import {{ service_name|pascal_case }}Tools

logger = logging.getLogger(__name__)

class {{ service_name|pascal_case }}Server:
    """Enhanced MCP server with generated API client"""
    
    def __init__(self, config: {{ service_name|pascal_case }}Config):
        self.config = config
        self.server = Server(name="{{ project_name }}")
        
        # Initialize generated API client
        client_config = Configuration()
        client_config.host = config.api_base_url
        if config.api_key:
            client_config.api_key['ApiKeyAuth'] = config.api_key
            
        self.api_client = ApiClient(client_config)
        self.tools = {{ service_name|pascal_case }}Tools(self.server, self.api_client, config)
        
        self._setup_handlers()